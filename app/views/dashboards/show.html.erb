
<h1 class="mt-3"><%= "Hello #{ @user.username } !"%></h1>
<div class="container">
  <div class="col-6 col-xs-12 col-md-8 col-lg-8">

    <div class="row justify-content-center dashboard">
      <h3 class="fw-bold mt-4 ms-4 mb-4">My Bookings</h3>

      <div class="d-flex justify-content-between">
        <div class="ms-3 me-3 dashboard_case">
          <h5>Validated</h5>
            <div class="border-bottom mb-3 me-3 w-100"></div>
              <% @validate_booking.each do |booking| %>
                <% if booking.date >= Date.today %>
                  <div class="d-flex">
                  <div class="dashboard_img">
                     <%= cl_image_tag(booking.offer.photo.key, width: 100, height: 100, quality: 60) %>
                  </div>
                    <div class="mb-3 ms-3 dashboard_details">
                      <h6 class="fw-bold"><%= booking.offer.name %></h6>
                      <p><%= booking.offer.location %> </p>
                      <p><%= booking.date.strftime('%a %d %b %Y') %></p>
                      <%= link_to "Cancel", declined_booking_path(booking), data: { turbo_method: :patch }%>
                      <div class="border-bottom mb-3"></div>
                    </div>
                  </div>
                <% end %>
              <% end %>
        </div>

        <div class="ms-3 me-3 dashboard_case">
          <h5>Pending</h5>
          <div class="border-bottom mb-3 w-100"></div>
            <% @pending_booking.each do |booking| %>
              <% if booking.date >= Date.today %>
                <div class="d-flex">
                  <div class="dashboard_img mb-3">
                    <%= cl_image_tag(booking.offer.photo.key, width: 100, height: 100, quality: 60) %>
                  </div>
                  <div class="mb-3 ms-3 dashboard_details align-items">
                    <h6 class="fw-bold"><%= booking.offer.name %></h6>
                    <p><%= booking.offer.location %> </p>
                    <p><%= booking.date.strftime('%a %d %b %Y') %></p>
                    <%= link_to "Cancel", declined_booking_path(booking), data: { turbo_method: :patch }, id:"hover", class:"cancel_link"%>
                  </div>
                </div>
              <% end %>
            <% end %>
        </div>
      </div>

      <div class="ms-3 me-3 mt-4">
        <h5 class="ms-3">Past</h5>
        <div class="border-bottom ms-3 mb-3 me-3"></div>
        <div class="">
          <% @past_bookings.each do |booking| %>
            <div class="d-flex mb-3 ms-3 ">
              <div>
                <%= cl_image_tag(booking.offer.photo.key, width: 100, height: 100, quality: 60) %>
              </div>
              <div class="ms-3 mt-1">
                <h6 class="fw-bold"><%= booking.offer.name %></h6>
                <p><%= booking.offer.location %> </p>
                <p><%= booking.date.strftime('%a %d %b %Y') %></p>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    </div>


  </div>
</div>

<div class="col-6 col-xs-12 col-md-8 col-lg-8">
  <div class="row justify-content-center dashboard">
  <h4>Seller</h4>
      <div class="">
        <% @rented_offers.each do |booking| %>
          <div class="d-flex mb-3 ms-3">
            <div>
              <%= cl_image_tag(booking.offer.photo.key, width: 100, height: 100, quality: 60) %>
            </div>
            <div class="mb-3 ms-3">
              <h6 class="fw-bold"><%= booking.offer.name%></h6>
              <p><%= booking.offer.location %> </p>
              <p><%= booking.date.strftime('%a %d %b %Y') %></p>
              <% if booking.status == "pending" %>
                <%= link_to "Accept", accepted_booking_path(booking), data: { turbo_method: :patch }, class:"cancel_link" %>
                <%= link_to "Decline", declined_booking_path(booking), data: { turbo_method: :patch }, class:"cancel_link"%>
              <% end %>
            </div>
          </div>
        <% end %>
      </div>
  </div>
</div>
